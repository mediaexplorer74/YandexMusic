<Page
    x:Class="YandexMusicUWP.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:YandexMusicUWP"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:YandexMusicUWP.Models"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Заголовок -->
            <RowDefinition Height="*"/> <!-- Основной контент -->
            <RowDefinition Height="Auto"/> <!-- Плеер -->
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Grid Grid.Row="0" Background="{StaticResource YandexYellowBrush}" Padding="12,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0" Text="Яндекс.Музыка" FontWeight="Bold" FontSize="20" VerticalAlignment="Center" Margin="0,0,12,0"/>
            
            <AutoSuggestBox Grid.Column="1" x:Name="SearchBox" PlaceholderText="Поиск треков, альбомов, исполнителей" 
                          QueryIcon="Find" Margin="0,0,12,0" QuerySubmitted="SearchBox_QuerySubmitted"/>
            
            <Button Grid.Column="2" x:Name="LoginButton" Content="Войти" Style="{StaticResource YandexButtonStyle}" 
                    Background="{StaticResource YandexDarkBrush}" Foreground="White" Click="LoginButton_Click"/>
        </Grid>

        <!-- Основной контент -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250" MinWidth="200"/> <!-- Левая панель -->
                <ColumnDefinition Width="*"/> <!-- Правая панель -->
            </Grid.ColumnDefinitions>

            <!-- Левая панель (плейлисты, навигация) -->
            <Grid Grid.Column="0" Background="{StaticResource YandexLightGrayBrush}" Padding="12">
                <ListView x:Name="NavigationList">
                    <ListViewItem>
                        <StackPanel Orientation="Horizontal">
                            <FontIcon Glyph="&#xE8D6;" Margin="0,0,12,0"/>
                            <TextBlock Text="Главная"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem>
                        <StackPanel Orientation="Horizontal">
                            <FontIcon Glyph="&#xE90B;" Margin="0,0,12,0"/>
                            <TextBlock Text="Моя коллекция"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem>
                        <StackPanel Orientation="Horizontal">
                            <FontIcon Glyph="&#xE8D4;" Margin="0,0,12,0"/>
                            <TextBlock Text="Плейлисты"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem>
                        <StackPanel Orientation="Horizontal">
                            <FontIcon Glyph="&#xE8B7;" Margin="0,0,12,0"/>
                            <TextBlock Text="Исполнители"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem>
                        <StackPanel Orientation="Horizontal">
                            <FontIcon Glyph="&#xE93C;" Margin="0,0,12,0"/>
                            <TextBlock Text="Альбомы"/>
                        </StackPanel>
                    </ListViewItem>
                </ListView>
            </Grid>

            <!-- Правая панель (треки) -->
            <Grid Grid.Column="1" Padding="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="Популярные треки" Style="{StaticResource YandexTextBlockHeaderStyle}"/>
                
                <ListView Grid.Row="1" x:Name="TracksListView" 
                          ItemsSource="{Binding _tracks}" 
                          IsItemClickEnabled="True"
                          ItemClick="TrackItem_Click">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="models:Track">
                            <Grid Width="500">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <FontIcon Grid.Column="0" Glyph="&#xE768;" Margin="0,0,12,0" 
                                          Visibility="{x:Bind IsPlaying, Mode=OneWay}"/>
                                
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="{x:Bind Title, Mode=OneWay}" FontWeight="SemiBold"/>
                                    <TextBlock Text="{x:Bind Artist, Mode=OneWay}" Foreground="{StaticResource YandexGrayBrush}" FontSize="12"/>
                                </StackPanel>
                                
                                <TextBlock Grid.Column="2" Text="{x:Bind FormattedDuration, Mode=OneWay}" Foreground="{StaticResource YandexGrayBrush}"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
        </Grid>

        <!-- Плеер -->
        <Grid Grid.Row="2" Background="{StaticResource YandexDarkBrush}" Padding="16,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/> <!-- Информация о треке -->
                <ColumnDefinition Width="*"/> <!-- Элементы управления -->
                <ColumnDefinition Width="Auto"/> <!-- Громкость -->
            </Grid.ColumnDefinitions>

            <!-- Информация о треке -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <Image Width="40" Height="40" Source="{Binding _currentTrack.CoverUrl, FallbackValue='/Assets/album_placeholder.svg'}"/>
                <StackPanel Margin="12,0,0,0">
                    <TextBlock Text="{Binding _currentTrack.Title, FallbackValue='Выберите трек'}" Foreground="White" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding _currentTrack.Artist, FallbackValue=''}" Foreground="{StaticResource YandexGrayBrush}" FontSize="12"/>
                </StackPanel>
            </StackPanel>

            <!-- Элементы управления -->
            <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Background="Transparent" Foreground="White">
                        <FontIcon Glyph="&#xE892;"/> <!-- Предыдущий трек -->
                    </Button>
                    <Button x:Name="PlayButton" Background="Transparent" Foreground="White" Margin="12,0" Click="PlayButton_Click">
                        <FontIcon Glyph="&#xE768;"/> <!-- Воспроизведение -->
                    </Button>
                    <Button Background="Transparent" Foreground="White">
                        <FontIcon Glyph="&#xE893;"/> <!-- Следующий трек -->
                    </Button>
                </StackPanel>
                
                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                    <TextBlock Text="0:00" Foreground="{StaticResource YandexGrayBrush}" FontSize="12" VerticalAlignment="Center"/>
                    <Slider Width="300" Margin="8,0" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding _currentTrack.FormattedDuration, FallbackValue='0:00'}" Foreground="{StaticResource YandexGrayBrush}" FontSize="12" VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>

            <!-- Громкость -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Background="Transparent" Foreground="White">
                    <FontIcon Glyph="&#xE767;"/> <!-- Звук -->
                </Button>
                <Slider Width="100" Margin="8,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</Page>